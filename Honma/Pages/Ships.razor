@attribute [Route(Routes.Ships)]
@inherits FluxorComponent

<MudContainer MaxWidth="MaxWidth.Medium">
    @{
        var ships = State.Value.Ships;

        <MudStack Class="mt-4">
            @foreach (var ship in ships)
            {
                <MudPaper Elevation="0">
                    <MudText>@ship.Registration.Name</MudText>
                </MudPaper>
            }
        </MudStack>
    }

    <MudPagination @bind-Selected="_page" Class="mt-4">
    </MudPagination>
</MudContainer>

@code {

    [Inject] public required IState<ShipState> State { get; set; }

    [Inject] public required IDispatcher Dispatcher { get; set; }

    private int _page = 1;
    private int _pageSize = 10;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        Dispatcher.Dispatch(new ShipsLoad(_pageSize, _page));
    }

}